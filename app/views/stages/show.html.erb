<header>
  <h1>Stage <%= @stage.order_number %></h1>
  <h2><%= @stage.stage_type.humanize.titleize %></h2>
</header>

<p>
  <% if @stage.ideal_time? %>
    The ideal time of this stage is <%= render_time_in_hms @stage.ideal_time %>.
    </p><p>
    The team closest to that time wins!
  <% elsif @stage.speed? %>
    Drive to the finishing point in as little time as possible!
  <% else %>
    The team who drives the shortest distance from start to finish wins!
  <% end %>
</p>

<div id="stage-finished" style="display:none;">
  <h1>Congratulations!</h1>
  <p>You have completed the stage with a time of</p>
</div>

<h2 id="timer" data-stage="<%= @stage.to_json_for_team current_team %>">
  Press Start to Begin the Stage
</h2>

<div id="overtime" style="display:none;">
  <h2>Warning!</h2>
  <p>
    You are now over the ideal time of <%= render_time_in_hms @stage.ideal_time %>!
    Please proceed to the next checkpoint at your earliest convienience.
  </p>
</div>

<div class="button-list fixed">
  <%= link_to "Start Stage", stage_start_path(@stage), class: "button start", style: "display:none;", remote: true %>
  <%= link_to "Finish Stage", stage_finish_path(@stage), class: "button finish", style: "display:none;", remote: true %>
  <%= link_to "Next Stage", current_stage_path, class: "button next", style: "display:none;" %>
</div>

<script type="text/javascript" charset="utf-8">
  $(function(){
    Rampage.initialize('timer');
  });
</script>
